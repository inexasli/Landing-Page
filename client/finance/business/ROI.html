<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Metrics Calculator</title>
    <link rel="icon" type="image/x-icon" href="Logo.png">
    <link rel="stylesheet" href="../../../style/template.css">
    <link rel="manifest" href="/manifest.json">
</head>
<body>

<div class="container">
    <h1>Business Metrics Calculator</h1>

    <label for="revenueType">Type of Revenue</label>
    <select id="revenueType" onchange="toggleRevenueType()">
        <option value="rental">Rental</option>
        <option value="service">Service</option>
        <option value="product">Product</option>
    </select>
    <span id="revenueTypeFrequency"></span>

    <label for="price">Price:</label>
    <input type="number" id="price">
    
    <label for="sales">Sales/Units/Rentals:</label>
    <input type="number" id="sales">
    <select id="salesFrequency" class="frequency-dropdown" onchange="updateFrequency('sales')">
        <option value="annually">Annually</option>
        <option value="quarterly">Quarterly</option>
        <option value="monthly">Monthly</option>
        <option value="weekly">Weekly</option>
    </select>

    <label for="cogs">Cost of goods sold applicable?</label>
    <select id="cogs" onchange="toggleCogs()">
        <option value="no">No</option>
        <option value="yes">Yes</option>
    </select>

    <div id="cogsSection" style="display: none;">
        <h2>Cost of Goods Sold</h2>
        <div class="input-group">
            <label for="cogsMaterials">Material Cost Per Unit</label>
            <div class="input-container">
                <input type="number" id="cogsMaterials">
                <span id="cogsMaterialsFrequency"></span>
            </div>
        </div>
        <div class="input-group">
            <label for="cogsLabor">Labor Cost Per Unit</label>
            <div class="input-container">
                <input type="number" id="cogsLabor">
                <span id="cogsLaborFrequency"></span>
            </div>
        </div>
        <div class="input-group">
            <label for="cogsOverhead">Overhead Cost Per Unit</label>
            <div class="input-container">
                <input type="number" id="cogsOverhead">
                <span id="cogsOverheadFrequency"></span>
            </div>
        </div>
        <div class="input-group">
            <label for="cogsShipping">Shipping Cost Per Unit</label>
            <div class="input-container">
                <input type="number" id="cogsShipping">
                <span id="cogsShippingFrequency"></span>
            </div>
        </div>
    </div>

    <h2>Operational Costs</h2>
    <!-- Similar structure for Operational, Building, and Vehicle Costs -->

    <h2>Assets</h2>
    <div class="input-group">
        <label for="cash">Cash</label>
        <input type="number" id="cash">
    </div>
    <!-- Similar for other assets -->

    <h2>Liabilities</h2>
    <div class="input-group">
        <label for="accountsPayable">Accounts Payable</label>
        <input type="number" id="accountsPayable">
    </div>
    <!-- Similar for other liabilities -->

    <h2>Results</h2>
    <div class="input-group">
        <label for="resultChange">Display results as:</label>
        <select id="resultChange" onchange="calculate()">
            <option value="1">Annual</option>
            <option value="12">Monthly</option>
            <option value="52">Weekly</option>
            <option value="365">Daily</option>
        </select>
    </div>

    <div id="results"></div>

    <button onclick="calculate()">Calculate</button>
</div>

<script>
    function toggleCogs() {
        document.getElementById('cogsSection').style.display = document.getElementById('cogs').value === 'yes' ? 'block' : 'none';
    }

    document.addEventListener('DOMContentLoaded', function() {
        toggleCogs();
    });

    function toggleRevenueType() {
        const revenueType = document.getElementById('revenueType').value;
        const salesLabel = document.querySelector('label[for="sales"]');
        const priceLabel = document.querySelector('label[for="price"]');

        if (revenueType === 'rental') {
            salesLabel.textContent = 'Rentals Contracted';
            priceLabel.textContent = 'Price Per Rental';
        } else if (revenueType === 'service') {
            salesLabel.textContent = 'Hours Billed';
            priceLabel.textContent = 'Price Per Hour';
        } else {
            salesLabel.textContent = 'Units Sold';
            priceLabel.textContent = 'Price Per Unit';
        }
    }

    function calculateAnnual(inputId, frequencyId) {
        const input = parseFloat(document.getElementById(inputId).value) || 0;
        const frequency = document.getElementById(frequencyId).value;

        switch (frequency) {
            case 'annually':
                return input;
            case 'quarterly':
                return input * 4;
            case 'monthly':
                return input * 12;
            case 'weekly':
                return input * 52;
            default:
                return 0;
        }
    }

    function calculate() {
        const resultDiv = document.getElementById('results');
        let result = '';

        const price = parseFloat(document.getElementById('price').value) || 0;
        const sales = parseFloat(document.getElementById('sales').value) || 0;
        const totalRevenue = calculateAnnual('sales', 'salesFrequency') * price;

        // COGS Calculation
        const cogsMaterialsValue = parseFloat(document.getElementById('cogsMaterials').value) || 0;
        const cogsLaborValue = parseFloat(document.getElementById('cogsLabor').value) || 0;
        const cogsOverheadValue = parseFloat(document.getElementById('cogsOverhead').value) || 0;
        const cogsShippingValue = parseFloat(document.getElementById('cogsShipping').value) || 0;
        const totalCOGS = (cogsMaterialsValue + cogsLaborValue + cogsOverheadValue + cogsShippingValue) * sales;

        // Total Costs
        const totalOperationalCosts = calculateAnnual('rent', 'rentFrequency') +
            calculateAnnual('utilities', 'utilitiesFrequency') +
            calculateAnnual('salaries', 'salariesFrequency') +
            calculateAnnual('marketing', 'marketingFrequency') +
            calculateAnnual('insurance', 'insuranceFrequency');

        const totalBuildingCosts = calculateAnnual('buildingRent', 'buildingRentFrequency') +
            calculateAnnual('buildingMaintenance', 'buildingMaintenanceFrequency') +
            calculateAnnual('buildingUtilities', 'buildingUtilitiesFrequency');

        const totalVehicleCosts = calculateAnnual('vehicleGas', 'vehicleGasFrequency') +
            calculateAnnual('vehicleMaintenance', 'vehicleMaintenanceFrequency') +
            calculateAnnual('vehicleInsurance', 'vehicleInsuranceFrequency');

        const totalCosts = totalCOGS + totalOperationalCosts + totalBuildingCosts + totalVehicleCosts;
        const netIncome = totalRevenue - totalCosts;

        const selectedValue = parseFloat(document.getElementById('resultChange').value);
        const netIncomeDivided = netIncome / selectedValue;

        result += `<h3>Total Revenue: ${totalRevenue.toFixed(2)}</h3>`;
        result += `<h3>Total COGS: ${totalCOGS.toFixed(2)}</h3>`;
        result += `<h3>Total Operational Costs: ${(totalOperationalCosts / selectedValue).toFixed(2)}</h3>`;
        result += `<h3>Total Building Costs: ${(totalBuildingCosts / selectedValue).toFixed(2)}</h3>`;
        result += `<h3>Total Vehicle Costs: ${(totalVehicleCosts / selectedValue).toFixed(2)}</h3>`;
        result += `<h3>Total Expenses: ${(totalCosts / selectedValue).toFixed(2)}</h3>`;
        result += `<h3>Net Income: ${netIncomeDivided.toFixed(2)}</h3>`;

        resultDiv.innerHTML = result;
    }
</script>

</body>
</html>
