<!DOCTYPE html>
<html lang="en">

<head>
     
     <link rel="manifest" href="/manifest.json">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUMMARY</title>
         <link rel="icon" type="image/x-icon" href="newLogo.jpg">
         <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

                      
    <link rel="icon" type="image/x-icon" href="/images/newLogo.jpg" />
    <link rel="shortcut icon" type="image/x-icon" href="/images/newLogo.jpg" />
    <link rel="icon" type="image/png" sizes="32x32" href="/images/newLogo.jpg" />
    <link rel="icon" type="image/png" sizes="16x16" href="/images/newLogo.jpg" />
    <link rel="apple-touch-icon" href="/images/newLogo.jpg" />
    <link rel="apple-touch-icon" sizes="180x180" href="/images/newLogo.jpg />
    <link rel="apple-touch-icon" sizes="152x152" href="/images/newLogo.jpg" />
    <link rel="apple-touch-icon" sizes="120x120" href="/images/newLogo.jpg" />
    <link rel="apple-touch-icon" sizes="76x76" href="/images/newLogo.jpg" />
    <link rel="icon" sizes="192x192" href="/images/newLogo.jpg" />
    <link rel="icon" sizes="512x512" href="/images/newLogo.jpg" />
    <link rel="mask-icon" href="/images/newLogo.jpg" color="#5bbad5" />
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="/style/styles.css">


</head>

<body style="display: none;">

     <img src="../../images/newLogo.jpg" alt="Logo" style="width: 50px; height: auto; display: block; margin: 0 auto;">

     <h2 style="text-align: center; font-size: 24px; color: white;">FINANCIAL INSIGHTS - EDUCATIONAL USE ONLY<u></u> <span class=" tooltip" data-tooltip="aa">ⓘ
        <span class="tooltip-content"></span>
        </span></h2>


     
        <div class="tab-container">
          <a href="/client/finance/income.html" class="tab" data-location="income">Income</a>
          <a href="/client/finance/expense.html" class="tab" data-location="expense">Expense</a>
          <a href="/client/finance/asset.html" class="tab" data-location="asset">Asset</a>
          <a href="/client/finance/liability.html" class="tab" data-location="liability">Liability</a>
              </div>
     <div class="container">
     
   <div style="text-align:center;"><select id="frequency">
        <option value="annual">Annual Frequency</option>
        <option value="monthly">Monthly Frequency</option>
        <option value="weekly">Weekly Frequency</option>
    </select></div>
    
    <summary>
      <span class=" tooltip" data-tooltip="Income left after expenses, taxes & other obligations. Use: Debt repayment, savings, investments & discretionary spending."><h2>Disposable Income:<span class="tooltip-content"></span><span id="DISPOSABLEINCOME"></span>
         </span>  </h2>
     
 </summary>

<details style="margin-top:10px;">
    <p style="margin-left:20px;"><span id="RegionDropdown"></span>
        <span id="SubregionDropdown"></span></p>
    <i style="margin-left:20px;">Residence for tax and obligatory purposes</i>

    <p style="margin-left:20px;"><u>Income:</u><span id="annual_income_sum"></span><span class=" tooltip" data-tooltip="Total earnings from all sources. Use: Budgeting, financial planning, loan applications.">ⓘ
      <span class="tooltip-content"></span>
      </span>  </p>

      <p style="margin-left:20px;"><u>Expense:</u><span id="annual_expense_sum"></span> <span class=" tooltip" data-tooltip="Total expenditures. Use: Identify spending patterns, budget adjustments.">ⓘ
        <span class="tooltip-content"></span>
        </span> </p>

        <p style="margin-left:20px;"><u>Total Tax Payable:</u>  <span id="tax_sum"></span><span class=" tooltip" data-tooltip="Sum of all taxes owed. Use: Financial planning, avoid underpayment penalties.">ⓘ
          <span class="tooltip-content"></span>
          </span></p>
    
          <p style="margin-left:20px;"><u>Other Obligations:</u><span id="ANNUALGOVERNMENTOBLIGATIONS"> <span class=" tooltip" data-tooltip="Sum of all other goverment obligations owed. Use: Financial planning, avoid underpayment penalties.">ⓘ
            <span class="tooltip-content"></span>
            </span> </span></p>
    
    <details>
        <p style="margin-left:60px;"><u>Taxable Income:</u> </p>
        <i style="margin-left:60px;">Subscribe for insights</i>

        <p style="margin-left:60px;"><u>Regional Tax Payable:</u> </p>
        <i style="margin-left:60px;">Subscribe for insights</i>

        <p style="margin-left:60px;"><u>Subregional Tax Payable:</u></p> 
        <i style="margin-left:60px;">Subscribe for insights</i>
               
               
        <!-- CAN -->
        <div class="can" id="can-hide">
            <p style="margin-left:60px;"><u>Self Employed CPP Payable:</u> </p>
            <i style="margin-left:60px;">Subscribe for insights</i>

            <p style="margin-left:60px;"><u>Employed CPP Payable:</u> </p>
            <i style="margin-left:60px;">Subscribe for insights</i>

            <p style="margin-left:60px;"><u>Total CPP Payable:</u></p>
            <i style="margin-left:60px;">Subscribe for insights</i>

            <p style="margin-left:60px;"><u>Total Employment Insurance Payable:</u> </p>
            <i style="margin-left:60px;">Subscribe for insights</i>
        </div>

        <!-- USA -->
        <div class="usa" id="usa-hide">

              <p style="margin-left:60px;"><u>Capital Gains Tax:</u> </p>
            <i style="margin-left:60px;">Subscribe for insights</i>
                   
            <p style="margin-left:60px;"><u>Social Security Total US:</u> </p>
            <i style="margin-left:60px;">Subscribe for insights</i>

            <p style="margin-left:60px;"><u>Social Security Employed US:</u></p>
            <i style="margin-left:60px;">Subscribe for insights</i>

            <p style="margin-left:60px;"><u>Social Security Self Employed US:</u> </p>
            <i style="margin-left:60px;">Subscribe for insights</i>

            <p style="margin-left:60px;"><u>Medicare:</u> </p>
            <i style="margin-left:60px;">Subscribe for insights</i>
        </div>
    </details>
</details>

    
<summary>
    <h2>Net Worth: <span class=" tooltip" data-tooltip="Assets minus liabilities. Use: Overall financial position, wealth tracking over time.">ⓘ
      <span class="tooltip-content"></span>
      </span><span style="margin-left: 5px;" id="NETWORTH"></span> </h2>
    <!-- <i>Assets minus liabilities. Use: Overall financial position, wealth tracking over time.</i> -->
</summary>

<details style="margin-top:20px;">
    <p style="margin-left:40px;"><u>Assets:</u></p>
    <i style="margin-left:40px;">Subscribe for insights</i>
   
    <p style="margin-left:40px;"><u>Liabilities:</u></p>
    <i style="margin-left:40px;">Subscribe for insights</i>
</details>

<summary>
    <h2>Ratios <span class=" tooltip" data-tooltip="Ratios serve to provide a quantitative comparison between two relevant financial metrics. They offer insights into various aspects of financial health, such as debt management, savings efficiency, affordability, and progress towards financial goals.">ⓘ
      <span class="tooltip-content"></span>
      </span></h2> 
    <!-- <span class=" tooltip"  data-tooltip="This is my tooltip  1 his is my tooltip his is my tooltip his is my tooltip his is my tooltip his is my tooltip his is my tooltip his is my tooltip his is my tooltip his is my toois my tooltip his is my tooltip his is my tooltip his is my toois my tooltip his is my tooltip his is my tooltip his is my toois my tooltip his is my tooltip his is my tooltip his is my toois my tooltip his is my tooltip his is my tooltip his is my toois my tooltip his is my tooltip his is my tooltip his is my toois my tooltip his is my tooltip his is my tooltip his is my tooltip his is my tooltip his is my tooltip ">ⓘ
      <span class="tooltip-content"></span>
    </span> -->
  




    <!-- <i>Ratios serve to provide a quantitative 
    </span> comparison between two relevant financial metrics. They offer insights into various aspects of financial health, such as debt management, savings efficiency, affordability, and progress towards financial goals.</i> -->
</summary>

<details>
    <p style="margin-top:20px;">
       <strong> <u>Debt to Income: Subscribe for insights</u></strong> <br>
        <i>Total debt as a percentage of income. Use: Evaluate borrowing capacity, financial health.</i>
    </p>
    <ul>
        <li>Bad: Above 0.36 <span class=" tooltip" data-tooltip="Indicates a high level of debt relative to income, potentially leading to financial strain.">ⓘ
          <span class="tooltip-content"></span>
          </span>   </li>
        <li>Okay: 0.20 to 0.36 <span class=" tooltip" data-tooltip="This range shows a manageable debt load but might limit borrowing capacity or financial flexibility.">ⓘ
          <span class="tooltip-content"></span>
          </span> </li>
        <li>Great: Below 0.20 <span class=" tooltip" data-tooltip="Suggests good control over debt, more income available for savings or investments, and generally better financial health.">ⓘ
          <span class="tooltip-content"></span>
          </span></li>
    </ul>

<p style="margin-top:20px;">
        <strong><u>Housing to Income: Subscribe for insights</u></strong> <br>
        <i>Housing costs as a percentage of income. Use: Assess housing affordability, financial stress.</i>
    </p>
    <ul>
        <li>Bad: .35 or higher  <span class=" tooltip" data-tooltip="Considered unsustainable, potentially indicating financial strain.">ⓘ
          <span class="tooltip-content"></span>
          </span> </li>
        <li>Okay: .25 - .35  <span class=" tooltip" data-tooltip="Within traditional affordability limits but might leave less room for savings or discretionary spending.">ⓘ
          <span class="tooltip-content"></span>
          </span> </li>
        <li>Great: Less than .25 <span class=" tooltip" data-tooltip="Allows for better management of expenses, savings, and investments.">ⓘ
          <span class="tooltip-content"></span>
          </span> </li>
    </ul>
     
    <p style="margin-top:20px;">
        <strong><u>Savings to Debt: Subscribe for insights</u></strong> <br>
        <i>Savings as a percentage of debt. Use: Assess financial security, emergency fund sufficiency.</i>
    </p>
    <ul>
        <li>Bad: Less than 1 <span class=" tooltip" data-tooltip="Indicates a very low capacity to handle unexpected expenses or debt repayment without potentially incurring more debt.">ⓘ
          <span class="tooltip-content"></span>
          </span> </li>
        <li>Okay: 1 to 2 <span class=" tooltip" data-tooltip="Suggests some level of financial buffer, but still on the lower side. Might manage small emergencies but would struggle with significant financial shocks.">ⓘ
          <span class="tooltip-content"></span>
          </span></li>
        <li>Great: 2 or higher <span class=" tooltip" data-tooltip="Indicates you're well-prepared for emergencies, debt management, or financial planning for the future.">ⓘ
          <span class="tooltip-content"></span>
          </span> </li>
    </ul>
        
    <p style="margin-top:20px;">
        <strong><u>FIRE: Subscribe for insights</u> <span class=" tooltip" data-tooltip="Financial Independence, Retire Early ratio; the percentage of annual expenses covered by passive income. Use: To directly assess how close one is to financial independence, where passive income sustains lifestyle without work income.">ⓘ
          <span class="tooltip-content"></span>
          </span></strong> <br>
    <!-- <i>Financial Independence, Retire Early ratio; the percentage of annual expenses covered by passive income. Use: To directly assess how close one is to financial independence, where passive income sustains lifestyle without work income.</i> -->
    </p>

     <ul>
    <li>Bad: Less than .10 <span class=" tooltip" data-tooltip="Indicates you are far from financial independence; significant work is needed to achieve FIRE goals.">ⓘ
      <span class="tooltip-content"></span>
      </span> </li>
    <li>Okay: Between .10 and .24 <span class=" tooltip" data-tooltip="You're making progress towards financial independence but are not yet at a point where passive income can sustain your lifestyle fully.">ⓘ
      <span class="tooltip-content"></span>
      </span> </li>
    <li>Great: .25 or higher <span class=" tooltip" data-tooltip="You've reached a level of financial independence where your passive income covers at least 25% of your annual living expenses, aligning with the FIRE movement's objectives.">ⓘ
      <span class="tooltip-content"></span>
      </span></li>
</ul>
     
</details>
     
   <h2>Financial Projections</h2>
   
   <p><u>Revolving Debt - Time to Pay: Subscribe for insights</u> <span class=" tooltip" data-tooltip="Revolving debt, such as student loans, lines of credit, credit cards, and tax arrears, allows for lump sum payments but usually incurs higher interest rates. This calculation estimates the time it will take to pay off the debt using disposable income if no savings are available.">ⓘ
    <span class="tooltip-content"></span>
    </span> </p>
<!-- <p>Revolving debt, such as student loans, lines of credit, credit cards, and tax arrears, allows for lump sum payments but usually incurs higher interest rates. This calculation estimates the time it will take to pay off the debt using disposable income if no savings are available.</p> -->



<form class="payment-form" id="payment-form" style="margin-top: 30px;">
    <input type="text" class="payment-input" id="username" placeholder="input name" required >
    <input type="email" class="payment-input" id="useremail" placeholder="input email" required >
    <div id="status"></div>
    <button    class="pay-button" id="pay-button">Subscribe for Premium Educational Insights!</button>
   
   </form>
   <a  href="mailto:support@inexasli.com" class=" contact-support" >i have paid</a>
   <a href="https://billing.stripe.com/p/login/3cs2a0d905QE71mbII" class=" contact-support" style="margin-bottom: 20px;">Customer portal</a>
   <div class="delete-div">
    <button onclick={deleteCookies()}>Clear records</button>
   </div>




<script src="https://js.stripe.com/v3/" async ></script>

<script >
  const tabs = document.querySelectorAll('.tab')

tabs.forEach(tab => {
    const dataL = tab.getAttribute('data-location')
    const location = document.location.pathname
    

    if (location.includes(dataL)) {

        tab.classList.add('active')
    }
})


function deleteCookies() {
    const cookies = document.cookie.split(";");

    const paths = ["/", "/client/finance"];
    const domains = [window.location.hostname]; 

    cookies.forEach(cookie => {
        const cookieName = cookie.split("=")[0].trim();
        

        if (cookieName === "authenticated") {
            return
        } else {
            var expires = "";

        
            var date = new Date();
            date.setTime(date.getTime());
            expires = "; expires=" + date.toUTCString();

            paths.forEach(path => {
                domains.forEach(domain => {
                    document.cookie = cookieName + "=" + encodeURIComponent( 0) + expires + "; path=/; SameSite=Strict; Secure";
                });
            });
        }  ;

    });

    document.location.reload();
}

    const paid = getCookie("authenticated");


    if (paid == "paid") {
        window.location.href = "/client/finance/summary.html";

  } else {
    document.body.style.display = 'initial'
  }



    
function getCookie1(name) {
    const value1 = `; ${document.cookie}`;
    const parts1 = value1.split(`; ${name}=`);
    let cookieValue1 = parts1.length === 2 ? decodeURIComponent(parts1.pop().split(';').shift()) : '';
    
    return cookieValue1 === '' ? '0' : cookieValue1;
}

    
function getCookie(name) {
    const value = `; ${document.cookie}`;
    const parts = value.split(`; ${name}=`);
    let cookieValue = parts.length === 2 ? decodeURIComponent(parts.pop().split(';').shift()) : '';
    
    // Get the selected frequency from the dropdown
    const frequencyDropdown = document.getElementById('frequency');
    const selectedFrequency = frequencyDropdown.value;

    // Convert the annual amount based on the selected frequency, if applicable
    if (selectedFrequency !== 'annually' && !isNaN(cookieValue)) {
        if (selectedFrequency === 'monthly') {
            cookieValue /= 12;
        } else if (selectedFrequency === 'weekly') {
            cookieValue /= 52;
        }
    }
    
    return cookieValue === '' ? '0' : cookieValue;
}


document.addEventListener('DOMContentLoaded', function() {
function updateOnChange(){    




let DISPOSABLEINCOME;

if (getCookie('RegionDropdown') === 'USA') {
    DISPOSABLEINCOME = parseFloat(getCookie('ANNUALINCOME')) -
        parseFloat(getCookie('ANNUALEXPENSESUM')) -
        parseFloat(getCookie('TOTALMEDICARE')) -
        parseFloat(getCookie('TOTALSOCIALSECURITY')) -
        parseFloat(getCookie('TOTALTAXCG')) -
        parseFloat(getCookie('ANNUALTAX'));
} else if (getCookie('RegionDropdown') === 'CAN') {
    DISPOSABLEINCOME = parseFloat(getCookie('ANNUALINCOME')) -
        parseFloat(getCookie('ANNUALEXPENSESUM')) -
        parseFloat(getCookie('ANNUALEI')) -
        parseFloat(getCookie('ANNUALCPP')) -
        parseFloat(getCookie('ANNUALTAX'));
} else {
    DISPOSABLEINCOME = 0
}

// Update HTML element with the calculated value
document.getElementById('DISPOSABLEINCOME').textContent = ' $' + DISPOSABLEINCOME.toFixed(2);


document.getElementById('annual_income_sum').textContent = " $" + parseFloat(getCookie('ANNUALINCOME')).toFixed(2);


document.getElementById('annual_expense_sum').textContent = " $" + parseFloat(getCookie('ANNUALEXPENSESUM')).toFixed(2);


document.getElementById('tax_sum').textContent = " $" + parseFloat((getCookie('ANNUALTAX'))).toFixed(2);


 
     
let ANNUALGOVERNMENTOBLIGATIONS;

    if (getCookie('RegionDropdown') === 'USA') {
    ANNUALGOVERNMENTOBLIGATIONS = parseFloat(getCookie('TOTALSOCIALSECURITY')) +
        parseFloat(getCookie('TOTALMEDICARE'));
} else if (getCookie('RegionDropdown') === 'CAN') {
    ANNUALGOVERNMENTOBLIGATIONS = parseFloat(getCookie('ANNUALCPP')) +
        parseFloat(getCookie('ANNUALEI'))  ;
} else {
    ANNUALGOVERNMENTOBLIGATIONS = 0
}

// Update HTML element with the calculated value
document.getElementById('ANNUALGOVERNMENTOBLIGATIONS').textContent = ' $' + ANNUALGOVERNMENTOBLIGATIONS.toFixed(2);

  

    NETWORTH = parseFloat(getCookie1('ASSETS')) - parseFloat(getCookie1('LIABILITIES'));
    document.getElementById('NETWORTH').textContent = '$' + NETWORTH.toFixed(2);

     const annualIncomeSpan = document.getElementById('ANNUALINCOME');
        if (annualIncomeSpan) {
            let annualIncome = getCookie('ANNUALINCOME');
            // Here we assume getCookie for ANNUALINCOME already handles frequency conversion
            annualIncomeSpan.textContent = '$' + annualIncome;
        }

  } 
  
  updateOnChange();
  


     
});




// payment scripts
const lambda =
  "https://cup7hlgbjk.execute-api.us-east-1.amazonaws.com/production/create-checkout-session";
const publicKey =
  "pk_test_51POOigILSdrwu9bgkDsm3tpdvSgP8PaV0VA4u9fSFMILqQDG0Bv8GxxFfNuTAv7knKX3x6685X3lYvxCs2iGEd9x00cSBedhxi";

  const payForm = document.querySelector("#payment-form");
  
  
  payForm.addEventListener("submit", (e) => {
    const stripe = Stripe(publicKey);
    console.log('function hit ', e)
      e.preventDefault();
      const payButton = document.querySelector("#pay-button");
      const nameInput = document.querySelector("#username");
      const emailInput = document.querySelector("#useremail");
      let payStatus = document.querySelector("#status");
      payStatus.innerHTML = "Please wait ......";
      const name = document.querySelector("#username").value;
      const email = document.querySelector("#useremail").value;

      if (!name || !email) {
        payStatus.innerHTML = "Please enter your name and email to proceed.";
        nameInput.disabled = false;
        emailInput.disabled = false;
        payButton.disabled = false;
        return;
      }

      nameInput.disabled = true;
      emailInput.disabled = true;
      payButton.disabled = true;

      //   alert(`${name} ${email}`);

      async function attemptPay() {
        const options = {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            task: "pay",
            client_email: email,
            client_name: name,
          }),
        };
        try {
          const res = await fetch(lambda, options);

          const data = await res.json();

          if (data.id) {
            payStatus.innerHTML =
              "payment proccessing, reload page after payment";
            await stripe.redirectToCheckout({ sessionId: data.id });
          } else {
            nameInput.disabled = false;
            emailInput.disabled = false;
            payButton.disabled = false;
            console.log("session data not returned: kindly retry", data);

            if (data.error) {
              payStatus.innerHTML = data.error;
            } else {
              payStatus.innerHTML = "Payment failed. Please try again";
            }
          }
        } catch (error) {
          console.error(error.message);
          payStatus.innerHTML =
            "Unable to connect. Check your internet and try again.";

          nameInput.disabled = false;
          emailInput.disabled = false;
          payButton.disabled = false;
        }
      }

      attemptPay();
    });





     



</script>

     <script src="/server/scripts/toolTip.js"></script>
</body>
</html>
