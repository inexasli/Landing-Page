<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liability</title>
	 <link rel="icon" href="Logo.png" type="image/png">
   <style>
    
     /* Modal styles */
    .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.5);
         cursor: pointer;
    }

    .modal-content {
        background-color: #000000;
        margin: 15% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
    }

    /* Close button styles */
    .close {
        color: #FFFFFF;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

    .close:hover,
    .close:focus {
        color: white;
        text-decoration: none;
        cursor: pointer;
    }


    
    body {
    background-color: #000;
    color: #fff;
    text-align: left;
    margin: 20px;
}

.row {
    display: flex;
    align-items: center; /* Align items vertically */
    margin-bottom: 10px;
}

label,
input[type="number"],
select {
    flex: 1; /* Equal width for all elements */
    margin-right: 10px;
}

span {
    /* Adjust as needed */
}

     
      .button-container {
        position: fixed;
        bottom: 0px; /* adjust as needed */
        right: 20px; /* adjust as needed */
    }

  .button-container2 {
        position: fixed;
        bottom: 0px; /* adjust as needed */
        right: 100px; /* adjust as needed */
    }
	   
button {
    background-color: #4CAF50;
    color: white;
    padding: 10px 20px;
    font-size: 16px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 20px;
}

.tab-container {
    display: flex;
    justify-content: center; /* Center-align tabs */
}

.tab {
    padding: 10px 10px;
    cursor: pointer;
    background-color: black;
    border: .01px solid;
    border-radius: 5px 5px 0 0;
    margin: 0 px; /* Adjust spacing between tabs */
    color: white; /* Set the text color to white */
}

/* Style for the active tab */
.active {
    background-color: white;
    color: black; /* Set the text color of the active tab to black */
}

/* Media Query for smaller screens (e.g., mobile) */
@media (max-width: 768px) {
    label,
    input[type="number"],
    select {
        width: 100%; /* Set width to 100% for smaller screens */
        margin-right: 0; /* Remove margin between elements */
    }
}

.numeric-input {
    /* Apply styling as needed */
    width: 200px;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 14px;
}

.container {
        display: none;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
    }

    </style>
</head>

<body>
<!--  <div class="tab-container">
        <a href="http://inexasli.com/income.html" class="tab">Income</a>
        <a href="http://inexasli.com/expense.html" class="tab">Expense</a>
        <a href="http://inexasli.com/asset.html" class="tab">Asset</a>
        <a href="http://inexasli.com/liability.html" class="tab">Liability</a>
        <a href="http://inexasli.com/summary.html" class="tab">Summary</a>
    </div> -->


 <h2 id= "liabilities">LIABILITIES</h2>
    
    <div class ="row">
    <label for="liabilities_small_business_loan">Small Business Loan:</label>
    <input type="text" id="liabilities_small_business_loan">
</div>

<div class ="row">
    <label for="liabilities_primary_residence">Primary Residence:</label>
    <input type="text" id="liabilities_primary_residence">
</div>

<div class ="row">
    <label for="liabilities_investment_properties">Investment Property(s):</label>
    <input type="text" id="liabilities_investment_properties">
</div>

<div class ="row">
    <label for="liabilities_vehicle_loan">Vehicle Loan:</label>
    <input type="text" id="liabilities_vehicle_loan">
</div>

<div class ="row">
    <label for="liabilities_student_loan">Student Loan:</label>
    <input type="text" id="liabilities_student_loan">
</div>

<div class ="row">
    <label for="liabilities_line_of_credit">Line of Credit:</label>
    <input type="text" id="liabilities_line_of_credit">
</div>

<div class ="row">
    <label for="liabilities_credit_card">Credit Card:</label>
    <input type="text" id="liabilities_credit_card">
</div>

<div class ="row">
    <label for="liabilities_tax_arrears">Tax Arrears:</label>
    <input type="text" id="liabilities_tax_arrears">
</div>

	  
  <div class = "button-container">
<button onclick="calculateNext()" style="border: 2px solid #aaa; border-radius: 8px; background-color: #eee; padding: 10px 20px; font-size: 16px; box-shadow: 2px 2px 5px #888; color: black;">Next</button>
  </div>  

<div class = "button-container2">
<button onclick="calculateBack()" style="border: 2px solid #aaa; border-radius: 8px; background-color: #eee; padding: 10px 20px; font-size: 16px; box-shadow: 2px 2px 5px #888; color: black;">Back</button>
  </div> 
	
<script>
   
    var LIABILITIES;
 
    function validatecheckbox() {
  var termscheckbox = document.getElementById("termscheckbox");
  var notintended = document.getElementById("notintended");
  var regionDropdown = document.getElementById("RegionDropdown");

  // Check if a valid region is selected
  if (regionDropdown.value === "" || regionDropdown.value === "Select Region") {
    alert("Please select a region from the dropdown.");
    return;
  }

  // Check if checkboxes are checked
  if (termscheckbox.checked && notintended.checked) {
    // Perform calculations
    calculateAll();
  } else {
    alert("Please agree to the terms of service & disclaimer.");
  }
}

    function openTermsModal() {
  console.log('openTermsModal() function called');
  // **Change:** Move setting modal display to within the then block after content is retrieved
  fetch('legal.txt') // Corrected file extension to '.txt'
    .then(response => response.text())
    .then(data => {
      document.getElementById('modalContent').innerText = data;
      // Set modal display to block after content is retrieved
      document.getElementById('termsModal').style.display = 'block';
    })
    .catch(error => console.error('Error fetching legal content:', error));
}

    function closeModal(event) {
    const modal = document.getElementById('termsModal');
    const modalContent = document.getElementById('modalContent');

    if (event.target === modal && event.target !== modalContent) {
        modal.style.display = 'none';
    }
}
    
document.addEventListener('click', closeModal);
    
    document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape' && document.getElementById('termsModal').style.display === 'block') {
        closeModal();
    }
});

    
  
function calculateLiabilities() {
    const liabilitiesFields = [
    'liabilities_small_business_loan',
    'liabilities_primary_residence',
    'liabilities_investment_properties',
    'liabilities_vehicle_loan',
    'liabilities_student_loan',
    'liabilities_line_of_credit',
    'liabilities_credit_card',
    'liabilities_tax_arrears'
    ];

    let liabilities = 0;

    for (let i = 0; i < liabilitiesFields.length; i++) {
        const fieldValue = document.getElementById(liabilitiesFields[i]).value;
        console.log(`Field value for ${liabilitiesFields[i]}: ${fieldValue}`);
        const parsedValue = parseFloat(fieldValue);
        if (!isNaN(parsedValue)) {
            liabilities += parsedValue;
        } else {
            console.error(`Invalid value for ${liabilities[i]}: ${fieldValue}`);
        }
    }

    LIABILITIES = liabilities;
    document.getElementById('LIABILITIES').textContent = '$' + LIABILITIES.toFixed(2);
}


function setCookie(name, value, days) {
    var expires = "";
    if (value === undefined || value === null || value === '') {
        value = '0';
    }
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + encodeURIComponent(value) + expires + "; path=/";
}


function setIncomeData(){ 
	const liabilitiesFields = [
    'liabilities_small_business_loan',
    'liabilities_primary_residence',
    'liabilities_investment_properties',
    'liabilities_vehicle_loan',
    'liabilities_student_loan',
    'liabilities_line_of_credit',
    'liabilities_credit_card',
    'liabilities_tax_arrears'
    ];


//for (let i = 0; i < frequencyFields.length; i++) {
  //const frequencyInput = document.getElementById(frequencyFields[i]);
 // if (frequencyInput.value.trim() !== "") {
 //   const frequency = frequencyInput.value;
 //   const expirationDate = new Date();
 //   expirationDate.setDate(expirationDate.getDate() + 365);
 //   document.cookie = `${frequencyFields[i]}=${frequency}; expires=${expirationDate.toUTCString()}`;
 // } else {
//    const frequency = "0";
 //   const expirationDate = new Date();
  //  expirationDate.setDate(expirationDate.getDate() + 365);
  //  document.cookie = `${frequencyFields[i]}=${frequency}; expires=${expirationDate.toUTCString()}`;
 // }
//}

for (let i = 0; i < liabilitiesFields.length; i++) {
  const liabilitiesInput = document.getElementById(liabilitiesFields[i]);
  if (liabilitiesInput.value.trim() !== "") {
    const liabilities = liabilitiesInput.value;
    const expirationDate = new Date();
    expirationDate.setDate(expirationDate.getDate() + 365);
    document.cookie = `${liabilitiesFields[i]}=${liabilities}; expires=${expirationDate.toUTCString()}; SameSite=None; Secure`;
  } else {
    const liabilities = "0";
    const expirationDate = new Date();
    expirationDate.setDate(expirationDate.getDate() + 365);
    document.cookie = `${liabilitiesFields[i]}=${liabilities}; expires=${expirationDate.toUTCString()}; SameSite=None; Secure`;
  }
}
}


	document.addEventListener('DOMContentLoaded', function() {
    // Function to retrieve cookie value by name
		function getCookie(name) {
    const value = `; ${document.cookie}`;
    const parts = value.split(`; ${name}=`);
    return parts.length === 2 ? decodeURIComponent(parts.pop().split(';').shift()) : '';
}
   
    
document.getElementById('liabilities_small_business_loan').value = getCookie('liabilities_small_business_loan');
document.getElementById('liabilities_primary_residence').value = getCookie('liabilities_primary_residence');
document.getElementById('liabilities_investment_properties').value = getCookie('liabilities_investment_properties');
document.getElementById('liabilities_vehicle_loan').value = getCookie('liabilities_vehicle_loan');
document.getElementById('liabilities_student_loan').value = getCookie('liabilities_student_loan');
document.getElementById('liabilities_line_of_credit').value = getCookie('liabilities_line_of_credit');
document.getElementById('liabilities_credit_card').value = getCookie('liabilities_credit_card');
document.getElementById('liabilities_tax_arrears').value = getCookie('liabilities_tax_arrears');
  })	

function calculateNext() {
  calculateAll();
  window.location.href = 'summary.html';
}

	function calculateBack() {
  calculateAll();
  window.location.href = 'asset.html';
}
	
    function calculateAll() {
        
    calculateLiabilities();
    
    setCookie("LIABILITIES", LIABILITIES, 365);

	    setIncomeData();
    }


</script>

    <div class = "container">

         <p><u>Liabilities:</u><span id="LIABILITIES"></span></p>
<span class="tooltiptext">Financial debts or obligations. Use: Debt management, financial strategy formulation.</span>

    </div>
        
</body>

    

</html>
